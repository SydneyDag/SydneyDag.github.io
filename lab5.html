<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" 
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" 
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

    <title>Lab 5</title>

    <style>
        .form-div{
            padding:30px;
            margin:20px;
        }

        label{
            margin-top:10px;
            margin-bottom:3px;
            margin-left:13px;
        }
        
        button{
            margin-top: 12px;
            margin-left:2px;
            padding: 4px 25px !important;
            background-color:#5C2D73 !important;
            border-color:#5C2D73 !important;
        }

        .error{
            color:red;
        }
    </style>

    <script type="text/javascript">

        function validatePassword(password) {

            for(var i = 0;i<password.length();i++ ){
                if(password[i] == '!' || password[i] == '?'){
                    return true;
                }
            }

            return false;
        }

        function validateForm(firstName, lastName, email, password, dob) {
        return firstName !== "" && lastName !== "" && email !== "" && password !== "" && dob !== "";
        }

        function maskPassword(password) {
        return "*".repeat(password.length);
        }

        function registerUser() {
        var firstName = document.getElementById("firstName").value;
        var lastName = document.getElementById("lastName").value;
        var email = document.getElementById("email").value;
        var password = document.getElementById("password").value;
        var dob = document.getElementById("dob").value;

        const user = {
            firstName: firstName,
            lastName: lastName,
            email: email,
            password: password,
            dob: dob
        };

        resultDiv = document.getElementById("result");

        if (!validateForm(firstName, lastName, email, password, dob)) {
            resultDiv.innerHTML = "<p class='error'>All fields are required.</p>";
            return;
        }

        if (!validatePassword(password)) {
            resultDiv.innerHTML = "<p class='error'>Password must contain a special character (! or ?).</p>";
            return;
        }

        user.password = maskPassword(password);

        resultDiv.innerHTML = `
            <p>Registration Successful</p>
            <p><strong>First Name:</strong> ${user.firstName}</p>
            <p><strong>Last Name:</strong> ${user.lastName}</p>
            <p><strong>Email:</strong> ${user.email}</p>
            <p><strong>Date of Birth:</strong> ${user.dob}</p>
            <p><strong>Password:</strong> ${user.password}</p>
        `;
        }
    </script>    

</head>
<body>

    <div class="container">
        <div style="height:30px;background-color: #5C2D73;"></div>
        <nav style="padding-left:12px;" class="navbar bg-body-tertiary flex-row">
            <div style ="width:inherit" class="container-fluid">
            <a style="font-size:.9rem" class="navbar-brand" href="/index.html">Home</a>
            </div>
            <div style ="width:inherit;" class="container-fluid">
                <a style="color:#5C2D73; font-size:.9rem;" class="navbar-brand" href="/lab5.html">Lab 5</a>
            </div>
        </nav>
        
        <div class="row">
            <div class="col-4">
                <img style="padding:20px" src="TB_logo.jpg" alt="Taco bell logo" width="90%">
            </div>
            <div style="margin:auto;" class="col-7">
                <h2 style="font-weight:600">Join The Taco Bell Rewards Program</h2>
            </div>
        </div>
        <div class="row">
            <div class="col-5 form-div" style="background-color:#f0f0f0">
                <form id="registrationForm">
                    <label for="firstName">First Name:</label>
                    <input type="text" class="form-control" id="firstName" placeholder="Enter first name">

                    <label for="lastName">Last Name:</label>
                    <input type="text" class="form-control" id="lastName" placeholder="Enter last name">

                    <label for="email">Email Address:</label>
                    <input type="email" class="form-control" id="email" placeholder="Enter email">

                    <label for="password">Password:</label>
                    <input type="password" class="form-control" id="password" placeholder="Enter password">

                    <label for="dob">Date of Birth:</label>
                    <input type="date" class="form-control" id="dob">

                    <button type="button" class="btn btn-primary" onclick="registerUser()">Register</button>
                </form>
            </div>
            <div id="result" class="col-5 form-div">

            </div>
        </div>

    </div>
</body>
</html>